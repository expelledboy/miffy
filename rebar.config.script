%-*-Erlang-*-

Rebar3 = erlang:function_exported(rebar3, main, 1),
Deps = proplists:get_value(deps, CONFIG),

UpdateDeps = fun(Fun) -> lists:keyreplace(deps, 1, CONFIG, {deps, lists:map(Fun,Deps)}) end,

case Rebar3 of
  true -> UpdateDeps(fun({Name,_Url,Tag}) -> {Name,Tag} end);
  false -> UpdateDeps(fun({Name,Url,Tag}) -> {Name,{git,Url,{tag,Tag}}} end)
end.
